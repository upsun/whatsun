# Package manager file rules.
#
# The "when" condition is matched as a "glob" against the files in a directory.
#
# NB: these are not exclusive; more than one package manager can be found for one directory.
package_managers:
  rules:
  - when: package-lock.json
    then: npm
    not: [bun, pnpm, yarn]
  - when: yarn.lock
    then: yarn
    not: [bun, npm, pnpm]
  - when: pnpm-lock.yaml
    then: pnpm
    not: [bun, npm, yarn]
  - when: bun.lock
    then: bun
    not: [npm, pnpm, yarn]
  - when: package.json
    maybe: [npm, pnpm, yarn, bun]

  - when: composer.json
    then: composer
  - when: composer.lock
    then: composer

  - when: requirements.txt
    then: pip
  - when: Pipfile
    then: pipenv
  - when: Pipfile.lock
    then: pipenv
  - when: pyproject.toml
    maybe: [poetry, pip]
  - when: poetry.lock
    then: poetry

  - when: gemfile*
    then: bundler

  - when: go.mod
    then: gomod
  - when: go.sum
    then: gomod

  - when: cargo.toml
    then: cargo
  - when: cargo.lock
    then: cargo

  - when: pom.xml
    then: maven
  - when: build.gradle
    then: gradle
  - when: build.gradle.kts
    then: gradle
  - when: settings.gradle
    then: gradle
  - when: gradle.properties
    then: gradle
  - when: gradlew
    then: gradle
  - when: gradlew.bat
    then: gradle

  - when: packages.lock.json
    then: nuget

  - when: mix.exs
    then: mix
  - when: mix.lock
    then: mix

  - when: quicklisp/.
    then: quicklisp
